name: Run tests on CI
on:
  push:
    branches: main
permissions:
  contents: read
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: ruby/setup-ruby@v1
      with:
        ruby-version: '2.6.10'
        bundler-cache: true
    - name: chrome
      run: ls ${GITHUB_WORKSPACE}
    - uses: browser-actions/setup-chrome@v1
      with:
        chrome-version: beta
      id: setup-chrome
    - run: |
        echo Installed chromium version: ${{ steps.setup-chrome.outputs.chrome-version }}
        ${{ steps.setup-chrome.outputs.chrome-path }} --version
    - name: Run tests
      run: bundle exec cucumber --format summary --format html --out report.html CHROMEDRIVER=/usr/bin/chromedriver